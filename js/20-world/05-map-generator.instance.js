
/**
 * @author ©Towns.cz
 * @fileOverview Creates instance T.World.mapGenerator
 */
//======================================================================================================================



T.World.mapGenerator = new T.MapGenerator(

    T.Math.blurXY(function(x,y){

        //todo//var key='x'+x+'y'+y;
        //todo//if(typeof z_map_cache[key]!='undefined'){
        //todo//    return(z_map_cache[key]);
        //todo//}


        const div=100;


        var n= 0;
        var max_possible_n=0;

        var _x,_y;

        for(var i= 0;i<13;i++){

            n += Math.round(Math.pow(x*y-66, 2)) % (div + 1);

            max_possible_n+=div;

            //x=Math.floor(x/3);
            //y=Math.floor(y/3);
            //var xy = T.Math.xyRotate(x,y,57);
            //x=xy.x;
            //y=xy.y;

            _x=(-y*0.2)+(x*0.8);
            _y=(x*0.2)+(y*0.8);

            x=Math.floor(_x/2);
            y=Math.floor(_y/2);
        }



        n=n/max_possible_n;

        if(n<0)n-=Math.floor(n);
        if(n>1)n-=Math.floor(n);

        //todo//z_map_cache[key]=n;
        return(n);

    },2)
    ,
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0002,0.0002,0.0002,0.0002,0.0002,0.0003,0.0004,0.0006,0.0007,0.0007,0.0007,0.0008,0.0008,0.0009,0.0009,0.001,0.0011,0.0012,0.0014,0.0015,0.0015,0.0015,0.0016,0.0018,0.002,0.0021,0.0022,0.0022,0.0025,0.0026,0.0029,0.0029,0.0031,0.0033,0.0036,0.0038,0.0041,0.0042,0.0042,0.0044,0.0044,0.0046,0.0051,0.0053,0.0056,0.006,0.0061,0.0066,0.0068,0.0071,0.0072,0.0074,0.0079,0.0086,0.0089,0.0093,0.0097,0.0101,0.0112,0.0117,0.012,0.0123,0.0133,0.0139,0.0144,0.0156,0.016,0.0166,0.0172,0.0177,0.0187,0.0196,0.0199,0.0204,0.0209,0.0216,0.0222,0.0226,0.023,0.0238,0.0245,0.0253,0.0258,0.0265,0.0274,0.0277,0.0281,0.0289,0.0295,0.0302,0.0312,0.0322,0.0332,0.0345,0.0351,0.0357,0.0368,0.038,0.0392,0.0397,0.0406,0.0414,0.0427,0.0438,0.0446,0.0452,0.0467,0.0485,0.0507,0.0513,0.0527,0.0534,0.055,0.0561,0.0575,0.0589,0.0609,0.0624,0.0637,0.0642,0.0656,0.0664,0.0675,0.0685,0.0706,0.0716,0.0732,0.0747,0.0763,0.0785,0.0799,0.081,0.083,0.0845,0.0859,0.0878,0.0893,0.0905,0.0921,0.0937,0.0965,0.0984,0.0995,0.1009,0.1023,0.1039,0.1058,0.1077,0.1097,0.1116,0.1134,0.1151,0.1163,0.1181,0.12,0.1214,0.1234,0.1251,0.1272,0.1286,0.1302,0.1317,0.1328,0.1349,0.137,0.1389,0.1417,0.143,0.1463,0.1483,0.1509,0.1538,0.156,0.1576,0.1594,0.1616,0.1636,0.1652,0.1676,0.1695,0.1722,0.1745,0.1762,0.178,0.1804,0.1825,0.1842,0.1862,0.1879,0.1892,0.1918,0.1942,0.197,0.1993,0.2009,0.2031,0.205,0.2077,0.2099,0.2122,0.2143,0.2164,0.2189,0.2211,0.2236,0.2251,0.2274,0.2303,0.2332,0.235,0.2371,0.2397,0.2419,0.2451,0.2467,0.2494,0.2517,0.2537,0.2556,0.2581,0.2604,0.2621,0.2642,0.2661,0.2672,0.2696,0.2718,0.2739,0.276,0.278,0.2807,0.2838,0.2866,0.2888,0.291,0.294,0.2965,0.2987,0.3014,0.3042,0.3065,0.3083,0.3109,0.313,0.3152,0.3186,0.3209,0.3227,0.3248,0.3275,0.3307,0.3333,0.3356,0.338,0.34,0.3426,0.3449,0.3474,0.3494,0.3527,0.3552,0.3572,0.36,0.3626,0.3658,0.3687,0.3714,0.3742,0.3768,0.3801,0.3825,0.3855,0.3878,0.3906,0.3932,0.3944,0.397,0.3994,0.4019,0.4047,0.4078,0.4096,0.4119,0.4145,0.4174,0.4208,0.4234,0.4257,0.428,0.4309,0.4342,0.4367,0.4397,0.4427,0.446,0.4499,0.4532,0.4555,0.4582,0.46,0.4622,0.4645,0.4673,0.47,0.4729,0.4762,0.479,0.4815,0.4843,0.4868,0.4887,0.4919,0.4944,0.4968,0.4995,0.5022,0.505,0.508,0.5109,0.5149,0.5173,0.5206,0.5238,0.527,0.5292,0.5318,0.5351,0.5376,0.5408,0.5438,0.5471,0.5499,0.5526,0.5555,0.5583,0.5609,0.5636,0.5666,0.5692,0.5712,0.5741,0.577,0.5795,0.582,0.5839,0.5871,0.59,0.5933,0.5961,0.5993,0.6022,0.6052,0.6081,0.6114,0.6147,0.6166,0.619,0.6221,0.6248,0.6279,0.6307,0.6338,0.6364,0.6393,0.6418,0.6448,0.648,0.651,0.6532,0.6562,0.6596,0.6626,0.6661,0.6686,0.6709,0.6739,0.677,0.6792,0.6815,0.6838,0.6869,0.6897,0.6919,0.6952,0.6976,0.7005,0.704,0.7086,0.7116,0.7139,0.7161,0.7179,0.7205,0.7229,0.7257,0.7287,0.7318,0.734,0.7367,0.7386,0.742,0.745,0.7482,0.7509,0.7539,0.7564,0.7594,0.7631,0.7659,0.7692,0.7712,0.774,0.777,0.7799,0.7821,0.785,0.7879,0.7913,0.7942,0.7977,0.8002,0.8032,0.8052,0.8079,0.8103,0.8132,0.8154,0.8174,0.8199,0.8216,0.8237,0.8261,0.828,0.8301,0.8319,0.8349,0.8385,0.8406,0.8437,0.8452,0.8474,0.8493,0.8519,0.8534,0.856,0.8589,0.8606,0.8623,0.8655,0.8688,0.8711,0.8737,0.8754,0.8774,0.8795,0.8808,0.8828,0.8852,0.887,0.8886,0.8901,0.8917,0.8937,0.8956,0.8975,0.8992,0.9011,0.904,0.9055,0.9072,0.9086,0.9109,0.9126,0.9136,0.9164,0.9189,0.9202,0.9212,0.9233,0.925,0.9269,0.9292,0.9313,0.9337,0.9352,0.9366,0.9377,0.9398,0.9412,0.9423,0.9442,0.9459,0.9468,0.9482,0.9493,0.9508,0.952,0.9529,0.9544,0.9556,0.9566,0.9578,0.9594,0.9596,0.9608,0.9619,0.963,0.9646,0.9661,0.9676,0.9692,0.9699,0.9711,0.972,0.9729,0.9735,0.9744,0.9758,0.9765,0.9768,0.9777,0.9788,0.9789,0.9797,0.9806,0.9819,0.9823,0.9831,0.9837,0.9842,0.985,0.9856,0.9859,0.9865,0.9869,0.9872,0.9875,0.9877,0.9884,0.989,0.9891,0.9897,0.9902,0.9902,0.991,0.9911,0.9916,0.992,0.9924,0.9928,0.9932,0.9934,0.9938,0.9941,0.9943,0.9945,0.9949,0.9951,0.9954,0.9957,0.9962,0.9963,0.9964,0.9965,0.9966,0.9967,0.9969,0.997,0.9974,0.9976,0.9977,0.998,0.9981,0.9982,0.9983,0.9984,0.9985,0.9986,0.9987,0.9988,0.9988,0.9988,0.9989,0.999,0.9993,0.9993,0.9993,0.9993,0.9993,0.9993,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9995,0.9996,0.9996,0.9996,0.9997,0.9998,0.9999,0.9999,0.9999,0.9999,0.9999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,

    new T.MapGenerator.Biotope([

        { amount: 120 , terrain: T.World.terrains[ 1]},//moře
        { amount: 40 , terrain: T.World.terrains[11]},//řeka
        { amount: 30 , terrain: T.World.terrains[ 4]},//písek
        { amount: 20 , terrain: T.World.terrains[12]},//tráva jaro
        { amount: 40 , terrain: T.World.terrains[ 9]},//tráva toxic
        { amount: 20 , terrain: T.World.terrains[ 8]},//tráva normal
        { amount: 20 , terrain: T.World.terrains[10]},//les
        { amount: 50 , terrain: T.World.terrains[ 4]},//písek
        { amount: 10 , terrain: T.World.terrains[13]},//tráva pozim
        { amount: 20 , terrain: T.World.terrains[ 5]},//kamení
        { amount: 60 , terrain: T.World.terrains[ 3]},//sníh/led
        { amount: 10 , terrain: T.World.terrains[10]},//les
        { amount: 60 , terrain: T.World.terrains[ 7]},//sníh/led
        { amount: 10 , terrain: T.World.terrains[ 5]},//kamení



    ]),


    function(object,virtual_objects){

        if(object.type!='terrain')return;

        if(object.getCode()==5){
            virtual_objects.push(
                {

                    x: object.x,//todo
                    y: object.y,//todo
                    type: 'natural',
                    design: {
                        type: 'natural',
                        data:{
                            image:'rock'+Math.floor(T.Math.randomSeedPosition(1,{x:object.x,y:object.y})*6)%6+'dark'+Math.floor(T.Math.randomSeedPosition(2,{x:object.x,y:object.y})*4)%4,
                            size: 0.5+T.Math.randomSeedPosition(5,{x:object.x,y:object.y})*1
                        }
                    }

                }
            );


        }else
        if(object.getCode()==10){
                        virtual_objects.push(
                {

                    x: object.x,//todo
                    y: object.y,//todo
                    type: 'natural',
                    design: {
                        type: 'natural',
                        data:{
                            image:'tree'+Math.floor(T.Math.randomSeedPosition(3,{x:object.x,y:object.y})*10)%10,
                            size: 1+T.Math.randomSeedPosition(6,{x:object.x,y:object.y})/2
                        }
                    }

                }
            );


        }


    }


);


















