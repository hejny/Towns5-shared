<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Towns-shared object price sample</title>
</head>


<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>

<script>
    var module={};
</script>


<script src="../classes-static/math.static.js"></script>
<script src="../classes-static/model-particles.static.js"></script>

<script src="../classes/model.class.js"></script>
<script src="../classes/action-type.class.js"></script>
<script src="../classes/resources.class.js"></script>
<script src="../classes/game.class.js"></script>

<script src="../inits/game.init.js"></script>


<script>



    $(function(){

        var change = function(){

            var object_json = $('#object-json').val();

            object_json=JSON.parse(object_json);

            var price_bases = game.getObjectPriceBases(object_json);
            var max_life = game.getObjectMaxLife(object_json);
            var prices = game.getObjectPrices(object_json);
            var price = game.getObjectPrice(object_json);

            $('#object-price').html('');

            $('#object-price').append('<b>Max life of building:</b><br>');
            $('#object-price').append(price_bases.join(' <br>+ ')+' <br>~= ');
            $('#object-price').append(max_life);


            $('#object-price').append('<br><hr><br>');


            $('#object-price').append('<b>Price of building:</b><br>');
            $('#object-price').append('( '+prices.join(' ) <br>+ ( ')+' ) <br>~= ');
            $('#object-price').append(price.toString());

        };

        $('#object-json').change(change);
        $('#object-json').keypress(function(){setTimeout(change,100)});
        change();

    });

</script>
<style>


    #object-json{
        display: inline-block;
        vertical-align: top;
        width: calc(50vw - 35px);
        height: calc(100vh - 35px);
    }


    #object-price{
        display: inline-block;
        vertical-align: top;
        text-align: right;
        width: 400px;
        max-width: calc(50vw - 35px);
        height: calc(100vh - 35px);
    }

</style>
<body>

<textarea id="object-json">
{
"name": "Foo",
"type": "building",
"subtype": "wall",

"life": 80,
"actions":[
    {
        "type": "defense",
        "params":{
            "defense": 80
        }
    },
    {
        "type": "attack",
        "params":{
            "strength": 100,
            "rounds": 10,
            "distance": 2,
            "cooldown": 500
        }
    }

],



"design": {
"type": "model",
"data": {
    "name":"root",

    "particles": [ { "name": "", "particles": [ { "name": "floor", "particles": [ { "name": "row", "particles": [ { "name": "brick", "shape": { "type": "prism", "n": 4, "rotated": false, "top": 1, "bottom": 1.1 }, "material": "stone_bricks", "position": { "x": 0, "y": 0, "z": 0 }, "size": { "x": 7, "y": 14, "z": 5 }, "rotation": 0 }, { "link": "brick", "position": { "x": 10, "y": 0, "z": 0 }, "rotation": 0 }, { "link": "brick", "position": { "x": 30, "y": 0, "z": 0 }, "rotation": 0 }, { "link": "brick", "position": { "x": 20, "y": 0, "z": 0 }, "rotation": 0 } ], "position": { "x": 0, "y": 0, "z": 0 }, "size": 1, "rotation": 0, "skew": { "z": { "x": 0, "y": 0 } } }, { "link": "row", "position": { "x": 0, "y": 15, "z": 0 }, "rotation": 0 } ], "position": { "x": 0, "y": 0, "z": 0 }, "size": 1, "rotation": 0, "skew": { "z": { "x": 0, "y": 0 } } }, { "link": "floor", "position": { "x": -6, "y": 0, "z": 0 }, "rotation": 290 } ], "position": { "x": 0, "y": 0, "z": 0 }, "size": 1, "rotation": 0, "skew": { "z": { "x": 0, "y": 0 } } }, { "name": "", "shape": { "type": "prism", "n": 4, "top": 1, "bottom": 1, "rotated": false }, "material": "stone_bricks", "position": { "x": 17, "y": -17, "z": 0 }, "size": { "x": 25, "y": 25, "z": 18 }, "rotation": 30, "skew": { "z": { "x": 0, "y": 0 } } }, { "name": "", "shape": { "type": "prism", "n": 4, "top": 1, "bottom": 1, "rotated": false }, "material": "stone_bricks", "position": { "x": 23, "y": -6, "z": 0 }, "size": { "x": 25, "y": 19, "z": 12 }, "rotation": 0, "skew": { "z": { "x": 0, "y": 0 } } } ]

}
}


}
</textarea>
<div id="object-price"></div>


</body>
</html>