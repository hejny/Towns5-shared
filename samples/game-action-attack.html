


<script>

    $(function(){



        $.ajax({
            url: 'http://api.towns.cz/objects/prototypes'
        }).done(function(response) {


            var objects = new TOWNS.Objects.Array(response);

            r(objects);


            var buildings = objects.filterTypes('building');


            var attacker = buildings.getAll()[3];
            var attacked = buildings.getAll()[2];

            r(buildings);

            attacker.x=100;
            attacker.y=100;

            attacked.x=101;
            attacked.y=100;


            var resources = new TOWNS.Resources({wood:300});



            $('html').append(attacker.createHtmlProfile()+' <div class="big">vs.</div> '+attacked.createHtmlProfile());


            result = TOWNS.World.game.createActionExecute('attack')(attacker,attacked,resources);


            console.log(result);


            $('html').append('<div class="big">=</div>');
            $('html').append(attacker.createHtmlProfile()+attacked.createHtmlProfile());



            result = TOWNS.World.game.createActionExecute('attack')(attacker,attacked,resources);


            $('html').append('<div class="big">=</div>');
            $('html').append(attacker.createHtmlProfile()+attacked.createHtmlProfile());




            console.log(result);



        });


    });

</script>



