<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Towns-shared object price sample</title>
</head>


<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>

<script>
    var module={};
</script>


<script src="../../math/math.js"></script>


<script src="../classes/terrain.class.js"></script>
<script src="../classes/biotope.class.js"></script>
<script src="../classes/map-generator.class.js"></script>


<script src="../inits/terrains.init.js"></script>
<script src="../inits/map-generator.init.js"></script>



<script>
    $(function(){

        var on_row = 8;
        var on_row_ = 0;

        while(on_row>=1) {

            var horizont=Math.pow(2,10+9);

            var map_size_px = 1.3,
                map_radius = 200 / on_row,
                map_center = {
                    x: (Math.random()-0.5)*horizont,
                    y: (Math.random()-0.5)*horizont
                };


            var jQueryCanvas = $('<canvas></canvas>');


            jQueryCanvas
                    .attr('width', map_radius * 2 * map_size_px)
                    .attr('height', map_radius * 2 * map_size_px)
                    .addClass('mapCircle')
                    //.css('position','fixed')
                    //.css('top' ,'calc(50% - '+(map_radius*map_size_px)+'px )')
                    //.css('left','calc(50% - '+(map_radius*map_size_px)+'px )')
            ;


            var ctx = jQueryCanvas[0].getContext('2d');


            var map = Towns.MapGenerator.mapGenerator.getMapCircle(map_center, map_radius);

            //console.log(map);


            for (var y = 0; y < map_radius * 2; y++) {
                for (var x = 0; x < map_radius * 2; x++) {

                    if (typeof(map[y][x]) === 'undefined')continue;

                    //console.log(map[y][x].getColor());

                    ctx.beginPath();
                    ctx.rect(Math.floor(x * map_size_px), Math.floor(y * map_size_px), Math.ceil(map_size_px), Math.ceil(map_size_px));
                    ctx.fillStyle = map[y][x].getColor();
                    ctx.fill();


                }
            }

            $('#maps').append(jQueryCanvas);


            on_row_ ++;
            if(on_row_>=on_row){

                on_row_=0;
                on_row=on_row/2;
                $('#maps').append('<br>');

            }




        }


    });
</script>
<style>

.mapCircle{

    display: inline-block;

    border: 2px solid #444;
    border-radius: 9999px;

    /**/
}


</style>
<body>


<div id="maps" style="text-align: center;width: 100%;">
</div>


</body>
</html>